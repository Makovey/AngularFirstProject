<div class="col-lg-12">
  <div class="card">
    <div class="card-header card-header-warning">
      <h4 class="card-title">Список задач</h4>
    </div>
    <div class="card-body table-responsive">
      <table [dataSource]="dataSource" mat-table>

        <!--  цвет приоритета  -->
        <ng-container matColumnDef="color">
          <mat-header-cell *matHeaderCellDef></mat-header-cell>
          <mat-cell *matCellDef="let task" [style.background-color]="getPriorityColor(task)"></mat-cell>
        </ng-container>

        <!-- нумеризация -->
        <ng-container matColumnDef="id">
          <mat-header-cell *matCellDef></mat-header-cell>
          <mat-cell *matCellDef="let index = index">
            {{index + 1}}
          </mat-cell>
        </ng-container>

        <!-- название задачи -->
        <ng-container matColumnDef="title">
          <mat-header-cell *matCellDef>Название</mat-header-cell>
          <mat-cell *matCellDef="let task" [class.completed]="task.completed">
            {{task.title}}
          </mat-cell>
        </ng-container>

        <!-- дата выполнения -->
        <ng-container matColumnDef="date">
          <mat-header-cell *matCellDef>Срок</mat-header-cell>
          <mat-cell *matCellDef="let task" [ngClass]="{'completed' : task.completed, 'nodate' : task.date == null}">
            {{task.date | date: 'medium'}}
          </mat-cell>
        </ng-container>

        <!-- приоритет -->
        <ng-container matColumnDef="priority">
          <mat-header-cell *matCellDef>Приоритет</mat-header-cell>
          <mat-cell *matCellDef="let task"
                    [ngClass]="{'completed' : task.completed, 'nopriority' : task.priority == null}">
            {{task.priority ? task.priority.title : 'Без приоритета'}}
          </mat-cell>
        </ng-container>

        <!-- категория -->
        <ng-container matColumnDef="category">
          <mat-header-cell *matCellDef>Категория</mat-header-cell>
          <mat-cell *matCellDef="let task"
                    [ngClass]="{'completed' : task.completed, 'nocategory' : task.category == null, 'link' : !task.completed && task.category}">
            {{task.category ? task.priority.title : 'Без категории'}}
          </mat-cell>
        </ng-container>

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row" >{{row.column}}</mat-row>

      </table>
    </div>
  </div>
</div>
